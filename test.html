<style type="text/css">
	.main_div {
    width:400px;
    height:600px;
    background-color:#9F0;
}
.main_div > div {
    float: left;
}
</style>


<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>

<div class="main_div"></div>


<script type="text/javascript">
	
	var no = 1, $m = $(".main_div"), size = 600;

$m.click(function(){
    no++;
    var i, _no = no, _size = size/no;
    $m.empty();

    for(i=0; i<_no; i++)
        $m.append(
            $('<div title='+ i +'/>')
            .css('background-color', '#'+Math.floor(Math.random()*16777215).toString(16))
        );

    $m.find('> div').css({ width:400, height:_size });

})


</script>
